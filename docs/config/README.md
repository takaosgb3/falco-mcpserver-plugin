# Config Guide (Public)

- 目的: 運用時に利用する許可リスト/しきい値/レッドアクト方針の例を示す（参考実装）。
- 注意: 現時点のルールは固定値ベース。将来的にプラグイン/生成で動的化を検討。

## Example Values

- サンプル: `docs/config/EXAMPLE_VALUES.yaml`
- 意味:
  - `allowlist.hosts`: 許可する MCP サーバホスト。
  - `thresholds.*`: 警告のしきい値（バイト/回数）。
  - `redaction.*`: 認証情報やIDのマスキング/ハッシュ。

## 運用のヒント

- 環境別に上書きファイル（例: `values.local.yaml`）を持ち、CI/本番で切替。
- プラグイン側で評価済みブール（例: `mcp.host_allowed`）を出力できるようにすると、ルールが簡潔に。
- 変更は小さく可逆に。ルール変更時はテスト（JSONアサーション）も併せて更新。

## 監査ファイルの保持/権限（推奨・追記）

- 権限: 0600 で作成（実装は `os.OpenFile(..., 0o600)`）。
- ローテーション: 日次またはサイズ基準でのローテーションを推奨（外部ローテータ利用）。
- 保存期間: 最小限（例: 7–30日）。機密度に応じ短縮を推奨。
- 保存先: 暗号化ボリュームや CI アーティファクトの短期保持。パブリック公開は不可。

## 監査の有効化/無効化・透明性（追記）

- 実行形態: 監査は明示的に `mcp-audit-wrap`/`mcp-audit-proxy` を起動した場合のみ有効（デフォルト無効）。
- オプトアウト: 監査を行わない＝上記ツールを使用しない。将来的に環境変数トグル（例: `MCP_AUDIT_ENABLED=false`）の導入を検討。
- 告知: プロジェクト README/運用ドキュメントに監査の目的/項目/保持/オプトアウトを明記。

## 収集最小化/レッドアクト（原則・追記）

- 既定はメタデータのみを収集（本文/認証情報は収集しない）。
- 将来の拡張項目（例: `cert_fingerprint`）はハッシュ化/無効化のオプションを伴うことを原則とする。
